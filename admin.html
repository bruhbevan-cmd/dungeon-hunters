<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Mestre - Dungeon Hunters</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        body { background: #1a1a1a; color: white; font-family: sans-serif; padding: 20px; }
        .admin-card { background: #252525; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid #7289da; }
        select, input { padding: 12px; border-radius: 5px; margin-top: 5px; width: 100%; background: #000; color: #fff; border: 1px solid #444; }
        .btn-save { background: #2ecc71; color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; margin-top: 10px; font-weight: bold; }
        .btn-kick { background: #e74c3c; color: white; border: none; padding: 8px; width: 100%; border-radius: 5px; margin-top: 5px; font-size: 0.8rem; }
    </style>
</head>
<body>
    <h2>Admin - Dungeon Hunters</h2>
    <input type="password" id="adminPass" placeholder="Senha de Mestre" style="margin-bottom:20px;">
    
    <div id="listaEdicao"></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAsq9HAbLMReGnDX9jfRnChPF-R0f0rDfA",
            authDomain: "dungeon-hunters-15a90.firebaseapp.com",
            databaseURL: "https://dungeon-hunters-15a90-default-rtdb.firebaseio.com",
            projectId: "dungeon-hunters-15a90",
            storageBucket: "dungeon-hunters-15a90.firebasestorage.app",
            messagingSenderId: "386699061769",
            appId: "1:386699061769:web:30f9023befc43da2ab66d8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const RANKS = ["Cobre", "Ferro", "Prata", "Ouro", "Platina", "Mithril", "Orichalcum", "Adamantite", "Master"];

        db.ref('players').on('value', snap => {
            let html = "";
            snap.forEach(child => {
                let p = child.val();
                if(!p.name) return;
                let options = RANKS.map(r => `<option value="${r}" ${p.rank === r ? 'selected' : ''}>${r}</option>`).join('');
                html += `<div class="admin-card">
                    <strong>${p.name}</strong> (${p.online ? 'ON' : 'OFF'})<br>
                    <select id="rank-${p.name}">${options}</select>
                    <button class="btn-save" onclick="salvarRank('${p.name}')">Salvar Rank</button>
                    <button class="btn-kick" onclick="kickPlayer('${p.name}')">EXPULSAR DA DUNGEON</button>
                </div>`;
            });
            document.getElementById('listaEdicao').innerHTML = html;
        });

        function salvarRank(nome) {
            if(document.getElementById('adminPass').value !== "hunters123") return alert("Senha errada!");
            const novoRank = document.getElementById(`rank-${nome}`).value;
            db.ref('players/' + nome).update({ rank: novoRank });
        }

        function kickPlayer(nome) {
            if(document.getElementById('adminPass').value !== "hunters123") return alert("Senha errada!");
            if(confirm("Expulsar " + nome + "?")) {
                db.ref('players/' + nome).remove();
            }
        }
    </script>
</body>
</html>
