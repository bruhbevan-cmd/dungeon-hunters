<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadro de Miss√µes - Taverna</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        body {
            background: #2c1b10;
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
            color: #3d2411;
            font-family: 'Georgia', serif;
            margin: 0;
            padding: 20px;
        }
        h1 { text-align: center; color: #f3e5ab; text-shadow: 2px 2px 4px #000; font-size: 2.5rem; }
        
        /* Container do Mural */
        .mural {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Estilo do Pergaminho */
        .pergaminho {
            background: #f4e4bc;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            padding: 25px;
            border-radius: 5px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
            border: 1px solid #d2b48c;
            position: relative;
            transition: transform 0.3s;
            min-height: 350px;
            display: flex;
            flex-direction: column;
        }
        .pergaminho:hover { transform: scale(1.02) rotate(1deg); }

        .tag {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            color: white;
        }
        .tipo-combate { background: #8b0000; }
        .tipo-coleta { background: #228b22; }
        .tipo-expedicao { background: #4169e1; }

        .missao-titulo { font-size: 1.4rem; border-bottom: 2px solid #3d2411; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold; }
        .info-row { font-size: 0.85rem; margin: 5px 0; }
        .info-row strong { color: #5d3a1a; }
        .desc { font-style: italic; font-size: 0.95rem; margin-top: 10px; flex-grow: 1; }
        
        .recompensa { 
            margin-top: 15px; 
            padding: 10px; 
            background: rgba(0,0,0,0.05); 
            border: 1px dashed #3d2411;
            text-align: center;
            font-weight: bold;
        }

        /* Bot√£o Aceitar */
        .btn-aceitar {
            background: #5d3a1a;
            color: #f4e4bc;
            border: none;
            padding: 10px;
            margin-top: 15px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }

        /* Painel do Mestre */
        .painel-mestre {
            max-width: 600px;
            margin: 50px auto;
            background: #f3e5ab;
            padding: 20px;
            border-radius: 10px;
            border: 3px double #3d2411;
        }
        input, textarea, select {
            width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #3d2411; box-sizing: border-box; background: #fffcf0;
        }
    </style>
</head>
<body>

    <h1>üìú Mural de Miss√µes da Taverna</h1>

    <div class="mural" id="muralMissoes">
        </div>

    <hr style="margin: 50px 0; border: 1px solid #5d3a1a;">

    <div class="painel-mestre">
        <h3>üõ†Ô∏è Postar Nova Miss√£o (√Årea do Mestre)</h3>
        <input type="text" id="qTitulo" placeholder="T√≠tulo da Miss√£o">
        <select id="qTipo">
            <option value="combate">‚öîÔ∏è Combate (Derrotar monstros)</option>
            <option value="coleta">üåø Coleta (Buscar itens)</option>
            <option value="expedicao">üó∫Ô∏è Expedi√ß√£o (Explorar locais)</option>
        </select>
        <input type="text" id="qLocal" placeholder="Local da Miss√£o">
        <input type="text" id="qTempo" placeholder="Tempo dispon√≠vel (Ex: 24 horas)">
        <input type="text" id="qRecompensa" placeholder="Recompensa (Ex: 500 Liras + Po√ß√£o)">
        <input type="text" id="qRequisito" placeholder="Recomenda√ß√µes (Ex: Rank Prata+)">
        <textarea id="qDesc" rows="4" placeholder="Informa√ß√µes detalhadas da miss√£o..."></textarea>
        <button class="btn-aceitar" onclick="postarMissao()" style="background: #228b22;">POSTAR MISS√ÉO NO MURAL</button>
    </div>

    <script>
        // Configura√ß√£o do seu Firebase (Mesmo da Dungeon)
        const firebaseConfig = {
            apiKey: "AIzaSyAsq9HAbLMReGnDX9jfRnChPF-R0f0rDfA",
            authDomain: "dungeon-hunters-15a90.firebaseapp.com",
            databaseURL: "https://dungeon-hunters-15a90-default-rtdb.firebaseio.com",
            projectId: "dungeon-hunters-15a90",
            storageBucket: "dungeon-hunters-15a90.firebasestorage.app",
            messagingSenderId: "386699061769",
            appId: "1:386699061769:web:30f9023befc43da2ab66d8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Fun√ß√£o para postar
        function postarMissao() {
            const data = {
                titulo: document.getElementById('qTitulo').value,
                tipo: document.getElementById('qTipo').value,
                local: document.getElementById('qLocal').value,
                tempo: document.getElementById('qTempo').value,
                recompensa: document.getElementById('qRecompensa').value,
                requisito: document.getElementById('qRequisito').value,
                desc: document.getElementById('qDesc').value,
                dataPost: new Date().toLocaleDateString('pt-BR')
            };

            if(!data.titulo) return alert("D√™ um t√≠tulo √† miss√£o!");

            db.ref('missoes').push(data).then(() => {
                alert("Miss√£o pregada no mural!");
                location.reload();
            });
        }

        // Fun√ß√£o para carregar
        db.ref('missoes').on('value', snap => {
            let html = "";
            snap.forEach(child => {
                const m = child.val();
                html += `
                <div class="pergaminho">
                    <div class="tag tipo-${m.tipo}">${m.tipo}</div>
                    <div class="missao-titulo">${m.titulo}</div>
                    <div class="info-row"><strong>üìç LOCAL:</strong> ${m.local}</div>
                    <div class="info-row"><strong>‚è≥ DISPON√çVEL:</strong> ${m.tempo}</div>
                    <div class="info-row"><strong>üìú REQUISITO:</strong> ${m.requisito}</div>
                    <div class="info-row"><strong>üìÖ POSTADO:</strong> ${m.dataPost}</div>
                    <div class="desc">${m.desc}</div>
                    <div class="recompensa">üí∞ RECOMPENSA: ${m.recompensa}</div>
                    <button class="btn-aceitar" onclick="aceitarMissao('${m.titulo}')">ACEITAR MISS√ÉO</button>
                    <button onclick="removerMissao('${child.key}')" style="background:none; border:none; color:rgba(0,0,0,0.2); font-size:0.6rem; margin-top:10px; cursor:pointer;">(Remover Miss√£o)</button>
                </div>`;
            });
            document.getElementById('muralMissoes').innerHTML = html || "<p style='text-align:center'>O mural est√° vazio por enquanto...</p>";
        });

        function aceitarMissao(titulo) {
            alert("Voc√™ aceitou a miss√£o: " + titulo + "!\nRelate ao mestre no Discord.");
            // Aqui voc√™ poderia colocar um Webhook para avisar no seu Discord automaticamente
        }

        function removerMissao(key) {
            if(confirm("Deseja retirar este pergaminho do mural?")) {
                db.ref('missoes/' + key).remove();
            }
        }
    </script>
</body>
  </html>
  
